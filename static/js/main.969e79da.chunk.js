(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{113:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"HOME",(function(){return u})),a.d(n,"SIGN_IN",(function(){return d}));var s=a(1),c=a(97),r=a.n(c),i=(a(113),a(28)),o=a(9),u="/",d="/signin",l=(a(67),a(98)),j=a(11),h=(a(114),a(117),{apiKey:"AIzaSyDTXVBIqR12248JX1ImrICuERIdGVMMVMk",authDomain:"draw-621d4.firebaseapp.com",databaseURL:"https://draw-621d4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"draw-621d4",storageBucket:"draw-621d4.appspot.com",messagingSenderId:"1002291615269",appId:"1:1002291615269:web:6362a79fb605e29e7e91cc",measurementId:"G-MDDBY9PTL6"}),b=function e(){var t=this;Object(l.a)(this,e),this.database=void 0,this.auth=void 0,this.user=void 0,this.admin="4jJw2Qp9zchYpmsNmqiw2dOwWZ13",this.setLoggedUser=function(e){t.user=e},this.getLoggedUser=function(){return t.auth.currentUser},this.createUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.signInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signOut=function(){return t.auth.signOut()},this.passwordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.passwordUpdate=function(e){if(t.auth.currentUser)return t.auth.currentUser.updatePassword(e)},this.checkIfLoggedIn=function(){return t.auth.currentUser},this.getUsers=function(){return t.database.ref("/users")},this.getImages=function(){return t.database.ref("users/"+t.admin+"/images")},this.addImageObject=function(e){if(t.auth.currentUser){var a=j.a.database().ref("users/"+t.auth.currentUser.uid+"/images").push().key,n="/users/".concat(t.auth.currentUser.uid,"/images/").concat(a);try{j.a.database().ref(n).set(e)}catch(c){console.log(c)}}else{console.log("Not logged in");a=j.a.database().ref("users/"+t.admin+"/images").push().key;var s="/users/".concat(t.admin,"/images/").concat(a);try{j.a.database().ref(s).set(e)}catch(c){console.log(c)}}},this.addImage=function(e){if(t.auth.currentUser){var a=j.a.database().ref("users/"+t.auth.currentUser.uid+"/images").push().key,n="/users/".concat(t.auth.currentUser.uid,"/images/").concat(a);try{j.a.database().ref(n).set(e)}catch(c){console.log(c)}}else{console.log("Not logged in");a=j.a.database().ref("users/"+t.admin+"/images").push().key;var s="/users/".concat(t.admin,"/images/").concat(a);try{j.a.database().ref(s).set(e)}catch(c){console.log(c)}}},this.updateImagePoints=function(e,a){var n="/users/".concat(t.admin,"/images/").concat(e);try{j.a.database().ref(n).update({points:a})}catch(s){console.log(s)}},this.deleteImage=function(e){var a="/users/".concat(t.admin,"/images/").concat(e);try{j.a.database().ref(a).remove()}catch(n){console.log(n)}},j.a.initializeApp(h),this.database=j.a.database(),this.auth=j.a.auth(),this.user=null},O=Object(s.createContext)(null),m=b,g=a(29),f=a(5),p=function(e){var t=e.name,a=e.link,n=e.icon;return Object(f.jsxs)("div",{className:"icon-link",children:[n,Object(f.jsx)("p",{onClick:function(){return e=a,void window.open(e,"_blank").focus();var e},children:t})]})},v=function(){return Object(f.jsxs)("div",{className:"link-container",children:[Object(f.jsx)(p,{name:"github.com",link:"https://github.com/itjonne",icon:Object(f.jsx)(g.c,{})}),Object(f.jsx)(p,{name:"linkedin.com",link:"https://www.linkedin.com/in/jonne-jormakka-74a308203/",icon:Object(f.jsx)(g.d,{})})]})},x=function(){Object(s.useContext)(O),Object(o.f)();return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(i.b,{className:"header-link",to:n.HOME,children:"://itjonne"}),Object(f.jsx)(v,{})]})},w=a(42),N=a(12),k=a(17),I={email:"",password:"",error:""},S=function(){var e=Object(s.useState)(I),t=Object(k.a)(e,2),a=t[0],c=t[1],r=Object(s.useContext)(O),i=Object(o.f)(),u=a.email,d=a.password,l=a.error,j=function(e){c(Object(N.a)(Object(N.a)({},a),{},Object(w.a)({},e.target.name,e.target.value)))};return Object(f.jsxs)("div",{className:"signin",children:[Object(f.jsx)("h1",{children:"Kirjaudu Sis\xe4\xe4n:"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r&&r.signInWithEmailAndPassword(u,d).then((function(e){r.setLoggedUser(e),c(Object(N.a)({},I)),i.push(n.HOME)})).catch((function(e){console.log(e),c(Object(N.a)(Object(N.a)({},a),{},{error:e.message}))}))},children:[Object(f.jsx)("p",{children:"admin@admin.com / password"}),Object(f.jsx)("input",{onChange:j,name:"email",value:u,type:"email",placeholder:"S\xe4hk\xf6posti (admin@admin.com)"}),Object(f.jsx)("input",{onChange:j,name:"password",value:d,type:"password",placeholder:"Salasana (password)"}),l&&Object(f.jsx)("p",{className:"error",children:l}),Object(f.jsx)("button",{type:"submit",children:"Kirjaudu Sis\xe4\xe4n"})]})]})},C=a(44),y=a(108),U=function(e){var t=Object(s.useState)("#000000"),a=Object(k.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)("#000000"),i=Object(k.a)(r,2),o=i[0],u=i[1],d=Object(s.useState)(g()),l=Object(k.a)(d,2),j=l[0],h=l[1],b=Object(s.useRef)(null),m=Object(s.useContext)(O);function g(){var e=window,t=e.innerWidth,a=e.innerHeight;console.log(t);var n=t>=533?t=400:t*=.75;return console.log(n),{width:n,height:a}}Object(s.useEffect)((function(){function e(){h(g())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);return Object(f.jsxs)("div",{className:"drawingComponent",children:[Object(f.jsx)("div",{className:"drawableCanvas",children:Object(f.jsx)(C.a,Object(N.a)({ref:b,canvasWidth:j.width,canvasHeight:j.width,brushColor:o,catenaryColor:o},e))}),Object(f.jsxs)("div",{className:"toolbar",children:[Object(f.jsx)("div",{className:"tool",children:Object(f.jsx)("button",{onClick:function(){return b.current.undo()},children:"Kumoa"})}),Object(f.jsx)("div",{className:"tool center",children:Object(f.jsx)(y.a,{width:.5*j.width,color:n,onChange:function(e){var t,a=100*parseFloat(e.rgb.a),n=(t=a,Math.round(t/100*255).toString(16).padStart(2,"0").toUpperCase());c(e.rgb),u(e.hex+n)}})}),Object(f.jsx)("div",{className:"tool",children:Object(f.jsx)("button",{onClick:function(){return function(){if(JSON.parse(b.current.getSaveData()).lines.length>0){localStorage.setItem("savedDrawing",b.current.getSaveData());var e={image:localStorage.getItem("savedDrawing"),points:0,reported:!1};m.addImageObject(e),b.current.clear()}else console.log("ei piirrustusta")}()},children:"Tallenna"})})]})]})},E=a(107),P=function(e){var t=e.points,a=e.handlePlus,n=e.handleMinus,c=e.handleReport,r=Object(s.useState)(t),i=Object(k.a)(r,2),o=i[0],u=i[1];return Object(f.jsxs)("div",{className:"tools",children:[Object(f.jsx)("div",{children:t>=0?Object(f.jsxs)("p",{className:"green",children:["+",t]}):Object(f.jsx)("p",{className:"red",children:t})}),Object(f.jsxs)("div",{className:"tool-container",children:[Object(f.jsx)("div",{className:"gallerytool green",onClick:function(){u(o+1),a()},children:Object(f.jsx)(g.b,{})}),Object(f.jsx)("div",{className:"gallerytool red",onClick:function(){u(o-1),n()},children:Object(f.jsx)(g.a,{})}),Object(f.jsx)("div",{className:"gallerytool",onClick:c,children:Object(f.jsx)(E.a,{})})]})]})},M=function(e){var t=e.data,a=Object(s.useRef)(null),n=Object(s.useContext)(O);Object(s.useEffect)((function(){a.current.loadSaveData(t.image)}),[t.image]);var c,r;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"canvas",onClick:function(e){return a.current.clear(),void a.current.loadSaveData(t.image)},children:Object(f.jsx)(C.a,Object(N.a)(Object(N.a)({ref:a},e),{},{loadTimeOffset:(c=10,r=50,Math.floor(Math.random()*(r-c+1))+c)}))}),Object(f.jsx)(P,{points:t.points,handlePlus:function(){n.updateImagePoints(t.id,t.points+=1)},handleMinus:function(){n.updateImagePoints(t.id,t.points-=1)},handleReport:function(){n.deleteImage(t.id)}})]})},D=function(){var e=Object(s.useState)([]),t=Object(k.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!0),r=Object(k.a)(c,2),i=r[0],o=r[1],u=Object(s.useContext)(O);return Object(s.useEffect)((function(){var e=u.getImages();if(u.getLoggedUser()){var t=e.on("value",(function(e){var t=e.val();if(t){for(var a=[],s=0,c=Object.keys(t);s<c.length;s++){var r=c[s];a.push(Object(N.a)({id:r},t[r]))}n(a),o(!1)}else n([]),o(!1)}));return function(){return t}}}),[u]),Object(f.jsxs)("div",{className:"gallery",children:[i&&Object(f.jsx)("div",{className:"loading",children:Object(f.jsx)("p",{children:"Ootappa hetki, galleria latautuu..."})}),a?a.map((function(e,t){return Object(f.jsx)(M,{data:e,canvasHeight:200,canvasWidth:200,disabled:!0},t)})):Object(f.jsx)("h1",{className:"center",children:"Piirr\xe4p\xe4 kuva ni p\xe4\xe4st\xe4\xe4n alkuun!"})]})},L=function(){var e=Object(s.useContext)(O),t=Object(o.f)();Object(s.useEffect)((function(){(null===e||void 0===e?void 0:e.getLoggedUser())||t.push(n.SIGN_IN)}),[e,t]);return Object(f.jsxs)("div",{className:"home",children:[Object(f.jsx)("div",{className:"logout",children:Object(f.jsx)("button",{onClick:function(a){null===e||void 0===e||e.signOut(),t.push(n.SIGN_IN)},children:"Log Out"})}),Object(f.jsx)("h1",{className:"center",children:"Tervetuloa, piirr\xe4 t\xe4h\xe4n jotain!"}),Object(f.jsx)(U,{lazyRadius:0,hideGrid:!0,brushRadius:5}),Object(f.jsx)("h1",{className:"center",children:"Galleria:"}),Object(f.jsx)(D,{}),Object(f.jsx)("p",{className:"center",children:"Klikkaamalla n\xe4kee animaation."})]})},R=function(){return Object(f.jsxs)(i.a,{children:[Object(f.jsx)(x,{}),Object(f.jsx)(o.b,{exact:!0,path:n.HOME,component:L}),Object(f.jsx)(o.b,{path:n.SIGN_IN,component:S}),Object(f.jsx)(o.a,{from:"*",to:"/"})]})};r.a.render(Object(f.jsx)(O.Provider,{value:new m,children:Object(f.jsx)(R,{})}),document.getElementById("root"))},67:function(e,t){}},[[232,1,2]]]);
//# sourceMappingURL=main.969e79da.chunk.js.map